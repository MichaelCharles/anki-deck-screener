(this["webpackJsonpanki-deck-screener"]=this["webpackJsonpanki-deck-screener"]||[]).push([[0],{37:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(30),s=n.n(c),o=(n(37),n(10)),u=n(3),i=n(1),d=function(){return Object(i.jsx)("p",{children:"About"})},p=n(2),f=n.n(p),l=n(4),h=n(12),j={stage:Object({NODE_ENV:"production",PUBLIC_URL:"/anki-deck-screener",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CUSTOM_ENV||"production",api:"http://localhost:8765"},b="anki-deck-screener-001-",v={set:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";I.log("storage.set",{key:e,val:t}),e&&localStorage.setItem("".concat(b).concat(e),JSON.stringify(t))},get:function(e){if(I.log("storage.get",e),e){var t=localStorage.getItem("".concat(b).concat(e));return JSON.parse(t)}},remove:function(e){I.log("storage.remove",{key:e}),e&&localStorage.removeItem("".concat(b).concat(e))}},O=n(15),g=n.n(O),x={"Content-Type":"application/json"},w=function(){var e=Object(l.a)(f.a.mark((function e(t,n){var r,a,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:{headers:x},I.log("query.post",{path:t,data:n,options:r}),e.next=4,g.a.post("".concat(j.api).concat(t),n,r);case 4:return a=e.sent,I.log("query.post (response)",a),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(f.a.mark((function e(t,n){var r,a,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:{headers:x},I.log("query.delete",{path:t,data:n,options:r}),e.next=4,g.a.delete("".concat(j.api).concat(t),{headers:r.headers,data:n});case 4:return a=e.sent,I.log("query.delete (response)",a),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(f.a.mark((function e(t,n){var r,a,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:{headers:x},I.log("query.put",{path:t,data:n,options:r}),e.next=4,g.a.put("".concat(j.api).concat(t),n,r);case 4:return a=e.sent,I.log("query.put (response)",a),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y={post:w,get:function(){var e=Object(l.a)(f.a.mark((function e(t){var n,r,a=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{headers:x},I.log("query.get",{path:t,options:n}),e.next=4,g.a.get("".concat(j.api).concat(t),n);case 4:return r=e.sent,I.log("query.get (response)",r),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),put:k,delete:m},S=function(){var e=Object(l.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.query.post("/",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.errors);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e,t){0},I={log:C,error:function(e,t){C("%c".concat(e)),C()},query:y,config:j,storage:v,api:{getAllDecks:function(){var e=Object(l.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"deckNames",version:6});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),findCardsForDeck:function(){var e=Object(l.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"findCards",version:6,params:{query:'"deck:'+t+'"'}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),findCardInfo:function(){var e=Object(l.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"cardsInfo",version:6,params:{cards:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),checkIfSuspended:function(){var e=Object(l.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"areSuspended",version:6,params:{cards:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cardsToNotes:function(){var e=Object(l.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"cardsToNotes",version:6,params:{cards:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addTagToNote:function(){var e=Object(l.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"addTags",version:6,params:{notes:[t],tags:"".concat(n)}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),notesInfo:function(){var e=Object(l.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"notesInfo",version:6,params:{notes:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),suspend:function(){var e=Object(l.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"suspend",version:6,params:{cards:[t]}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},validate:{email:function(e){var t=function(){throw new Error("Please enter a valid email.")},n=e.split("@");return 2!==n.length&&t(),n[1].includes(".")||t(),!0}},utility:{delay:function(e){return new Promise((function(t){return setTimeout((function(){t()}),e)}))}}},T=function(){var e=Object(r.useState)([]),t=Object(h.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(l.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.api.getAllDecks();case 2:t=e.sent,n=t.result,a(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){c()}),[]),Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"Decks"}),Object(i.jsx)("ul",{children:n.map((function(e){return Object(i.jsx)(o.b,{to:"screener/".concat(e),children:Object(i.jsx)("li",{children:e})})}))})]})},N=n(32),E=function(){var e=Object(u.f)().deckName,t=Object(r.useState)([]),n=Object(h.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)([]),o=Object(h.a)(s,2),d=o[0],p=o[1],j=Object(r.useState)(0),b=Object(h.a)(j,2),v=b[0],O=b[1],g=Object(r.useState)("question"),x=Object(h.a)(g,2),w=x[0],m=x[1],k=function(){var t=Object(l.a)(f.a.mark((function t(){var n,r,a,s,o,u,i,d,l,h,j,b;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.api.findCardsForDeck(e);case 2:return n=t.sent,r=n.result,t.next=6,I.api.findCardInfo(r);case 6:return a=t.sent,t.next=9,I.api.checkIfSuspended(r);case 9:return s=t.sent,t.next=12,I.api.cardsToNotes(r);case 12:return o=t.sent,u=a.result,i=s.result,d=o.result,t.next=18,I.api.notesInfo(d);case 18:for(l=t.sent,h=l.result,j=0;j<i.length;j++)u[j].suspended=i[j];for(b=0;b<h.length;b++)u[b].noteInfo=h[b];p(Object(N.a)(u)),c(u.filter((function(e){return!0!==e.suspended&&(e.noteInfo||(e.noteInfo={tags:[]}),!0!==e.noteInfo.tags.includes("screened"))})));case 24:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();window.cCard=v,window.dMode=w,window.cCardInfo=a[v],console.log(window.cCardInfo);var y=function(e){switch(console.log("Triggered: "+e.keyCode),e.keyCode){case 65:I.api.addTagToNote(window.cCardInfo.note,"screened"),m("question"),O(window.cCard+1);break;case 68:I.api.suspend(window.cCardInfo.cardId),I.api.addTagToNote(window.cCardInfo.note,"screened"),m("question"),O(window.cCard+1);break;case 32:console.log("Flip"),"answer"===window.dMode?m("question"):m("answer")}};return Object(r.useEffect)((function(){return window.addEventListener("keydown",y),function(){window.removeEventListener("keydown",y)}}),[]),Object(r.useEffect)((function(){k()}),[]),Object(i.jsxs)("div",{children:[Object(i.jsxs)("h3",{class:"title-with-description",children:["Screener for ",e]}),a.length>0&&Object(i.jsxs)("div",{children:[Object(i.jsxs)("h4",{class:"description",children:["Showing card ",v+1," out of ",a.length," cards (",d.length-a.length," suspended or screened)"]}),Object(i.jsxs)("p",{children:["Press ",Object(i.jsx)("kbd",{children:"spacebar"})," to reveal the other side of the card. Press ",Object(i.jsx)("kbd",{children:"a"})," to approve the card for studying. Press ",Object(i.jsx)("kbd",{children:"d"})," to suspend the card. Approving or suspending a card will automatically advance to the next card. "]}),Object(i.jsx)("div",{class:"card-material",dangerouslySetInnerHTML:{__html:a[v][w]}})]})]})};var q=function(){return Object(i.jsx)(o.a,{children:Object(i.jsxs)("div",{children:[Object(i.jsxs)("header",{children:[Object(i.jsx)("h2",{children:"Anki Deck Screener"}),Object(i.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(i.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(i.jsx)("li",{children:Object(i.jsx)(o.b,{to:"/",className:"nav-link",children:"Home"})}),Object(i.jsx)("li",{children:Object(i.jsx)(o.b,{to:"/about",className:"nav-link",children:"About"})})]})})]}),Object(i.jsx)("main",{children:Object(i.jsxs)(u.c,{children:[Object(i.jsx)(u.a,{exact:!0,path:"/",component:T}),Object(i.jsx)(u.a,{path:"/screener/:deckName",component:E}),Object(i.jsx)(u.a,{path:"/about",component:d})]})})]})})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(o.a,{children:Object(i.jsx)(q,{})})}),document.getElementById("root")),_()}},[[63,1,2]]]);
//# sourceMappingURL=main.1668b7dc.chunk.js.map