(this["webpackJsonpanki-deck-screener"]=this["webpackJsonpanki-deck-screener"]||[]).push([[0],{37:function(e,n,t){},63:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(30),s=t.n(c),o=(t(37),t(10)),u=t(3),i=t(1),d=function(){return Object(i.jsx)("p",{children:"About"})},p=t(2),f=t.n(p),l=t(4),h=t(12),j={stage:Object({NODE_ENV:"production",PUBLIC_URL:"/anki-deck-screener",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CUSTOM_ENV||"production",api:"http://localhost:8765"},b="anki-deck-screener-001-",v={set:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";I.log("storage.set",{key:e,val:n}),e&&localStorage.setItem("".concat(b).concat(e),JSON.stringify(n))},get:function(e){if(I.log("storage.get",e),e){var n=localStorage.getItem("".concat(b).concat(e));return JSON.parse(n)}},remove:function(e){I.log("storage.remove",{key:e}),e&&localStorage.removeItem("".concat(b).concat(e))}},O=t(15),g=t.n(O),x={"Content-Type":"application/json"},w=function(){var e=Object(l.a)(f.a.mark((function e(n,t){var r,a,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:{headers:x},I.log("query.post",{path:n,data:t,options:r}),e.next=4,g.a.post("".concat(j.api).concat(n),t,r);case 4:return a=e.sent,I.log("query.post (response)",a),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(f.a.mark((function e(n,t){var r,a,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:{headers:x},I.log("query.delete",{path:n,data:t,options:r}),e.next=4,g.a.delete("".concat(j.api).concat(n),{headers:r.headers,data:t});case 4:return a=e.sent,I.log("query.delete (response)",a),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(f.a.mark((function e(n,t){var r,a,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:{headers:x},I.log("query.put",{path:n,data:t,options:r}),e.next=4,g.a.put("".concat(j.api).concat(n),t,r);case 4:return a=e.sent,I.log("query.put (response)",a),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),y={post:w,get:function(){var e=Object(l.a)(f.a.mark((function e(n){var t,r,a=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{headers:x},I.log("query.get",{path:n,options:t}),e.next=4,g.a.get("".concat(j.api).concat(n),t);case 4:return r=e.sent,I.log("query.get (response)",r),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),put:m,delete:k},S=function(){var e=Object(l.a)(f.a.mark((function e(n){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.query.post("/",n);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.errors);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),C=function(e,n){0},I={log:C,error:function(e,n){C("%c".concat(e)),C()},query:y,config:j,storage:v,api:{getAllDecks:function(){var e=Object(l.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"deckNames",version:6});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),findCardsForDeck:function(){var e=Object(l.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"findCards",version:6,params:{query:'"deck:'+n+'"'}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),findCardInfo:function(){var e=Object(l.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"cardsInfo",version:6,params:{cards:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),checkIfSuspended:function(){var e=Object(l.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"areSuspended",version:6,params:{cards:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),cardsToNotes:function(){var e=Object(l.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"cardsToNotes",version:6,params:{cards:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),addTagToNote:function(){var e=Object(l.a)(f.a.mark((function e(n,t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"addTags",version:6,params:{notes:[n],tags:"".concat(t)}});case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),notesInfo:function(){var e=Object(l.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"notesInfo",version:6,params:{notes:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),suspend:function(){var e=Object(l.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({action:"suspend",version:6,params:{cards:[n]}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},validate:{email:function(e){var n=function(){throw new Error("Please enter a valid email.")},t=e.split("@");return 2!==t.length&&n(),t[1].includes(".")||n(),!0}},utility:{delay:function(e){return new Promise((function(n){return setTimeout((function(){n()}),e)}))}}},T=function(){var e=Object(r.useState)([]),n=Object(h.a)(e,2),t=n[0],a=n[1],c=function(){var e=Object(l.a)(f.a.mark((function e(){var n,t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.api.getAllDecks();case 2:n=e.sent,t=n.result,a(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){c()}),[]),Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"Decks"}),Object(i.jsx)("ul",{children:t.map((function(e){return Object(i.jsx)(o.b,{to:"screener/".concat(e),children:Object(i.jsx)("li",{children:e})})}))})]})},N=t(32),E=function(){var e=Object(u.f)().deckName,n=Object(r.useState)([]),t=Object(h.a)(n,2),a=t[0],c=t[1],s=Object(r.useState)([]),o=Object(h.a)(s,2),d=o[0],p=o[1],j=Object(r.useState)(0),b=Object(h.a)(j,2),v=b[0],O=b[1],g=Object(r.useState)("question"),x=Object(h.a)(g,2),w=x[0],k=x[1],m=function(){var n=Object(l.a)(f.a.mark((function n(){var t,r,a,s,o,u,i,d,l,h,j,b;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I.api.findCardsForDeck(e);case 2:return t=n.sent,r=t.result,n.next=6,I.api.findCardInfo(r);case 6:return a=n.sent,n.next=9,I.api.checkIfSuspended(r);case 9:return s=n.sent,n.next=12,I.api.cardsToNotes(r);case 12:return o=n.sent,u=a.result,i=s.result,d=o.result,n.next=18,I.api.notesInfo(d);case 18:for(l=n.sent,h=l.result,j=0;j<i.length;j++)u[j].suspended=i[j];for(b=0;b<h.length;b++)u[b].noteInfo=h[b];p(Object(N.a)(u)),c(u.filter((function(e){return!0!==e.suspended&&(e.noteInfo||(e.noteInfo={tags:[]}),!0!==e.noteInfo.tags.includes("screened"))})));case 24:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();window.cCard=v,window.dMode=w,window.cCardInfo=a[v],console.log(window.cCardInfo);var y=function(e){switch(console.log("Triggered: "+e.keyCode),e.keyCode){case 65:I.api.addTagToNote(window.cCardInfo.note,"screened"),k("question"),O(window.cCard+1);break;case 68:I.api.suspend(window.cCardInfo.cardId),I.api.addTagToNote(window.cCardInfo.note,"screened"),k("question"),O(window.cCard+1);break;case 32:console.log("Flip"),"answer"===window.dMode?k("question"):k("answer")}};return Object(r.useEffect)((function(){return window.addEventListener("keydown",y),function(){window.removeEventListener("keydown",y)}}),[]),Object(r.useEffect)((function(){m()}),[]),Object(i.jsxs)("div",{children:[Object(i.jsxs)("h3",{class:"title-with-description",children:["Screener for ",e]}),a.length>0&&Object(i.jsxs)("div",{children:[Object(i.jsxs)("h4",{class:"description",children:["Showing card ",v+1," out of ",a.length," cards (",d.length-a.length," suspended or screened)"]}),Object(i.jsxs)("p",{children:["Press ",Object(i.jsx)("kbd",{children:"spacebar"})," to reveal the other side of the card. Press ",Object(i.jsx)("kbd",{children:"a"})," to approve the card for studying. Press ",Object(i.jsx)("kbd",{children:"d"})," to suspend the card. Approving or suspending a card will automatically advance to the next card. "]}),Object(i.jsx)("div",{class:"card-material",dangerouslySetInnerHTML:{__html:a[v][w]}})]})]})};var q=function(){return Object(i.jsx)(o.a,{children:Object(i.jsxs)("div",{children:[Object(i.jsxs)("header",{children:[Object(i.jsx)("h2",{children:"Anki Deck Screener"}),Object(i.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(i.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(i.jsx)("li",{children:Object(i.jsx)(o.b,{to:"/anki-deck-screener/",className:"nav-link",children:"Home"})}),Object(i.jsx)("li",{children:Object(i.jsx)(o.b,{to:"/anki-deck-screener/about",className:"nav-link",children:"About"})})]})})]}),Object(i.jsx)("main",{children:Object(i.jsxs)(u.c,{children:[Object(i.jsx)(u.a,{exact:!0,path:"/anki-deck-screener",component:T}),Object(i.jsx)(u.a,{path:"/anki-deck-screener/screener/:deckName",component:E}),Object(i.jsx)(u.a,{path:"/anki-deck-screener/about",component:d})]})})]})})},_=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,64)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,s=n.getTTFB;t(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(o.a,{children:Object(i.jsx)(q,{})})}),document.getElementById("root")),_()}},[[63,1,2]]]);
//# sourceMappingURL=main.acc99fee.chunk.js.map